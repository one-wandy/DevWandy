   {% load humanize %}
   <style>
      .credit-sp div
      {
            color: black !important;
            margin-top: 3px;

      }
      .credit-sp  strong 
      {
            font-size: 12px !important;
            font-family: Chillax, sans-serif !important;
            color: #939393;
            background-color: rgba(222, 236, 255, 0);
            border-radius: 1rem;
            display: none;
            margin-right: 10px !important;
            padding: 1px 5px;
            width: 100%;
            max-width: 3.6rem;
            font-weight: 500;
            /* background-color: rgb(238, 238, 238); */
            text-align: center;

      }
      .credit-sp  .grey-divs
      {
            margin-top: 5px;

            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            font-weight: 500;
            background-color: #ffffffce; /* Light green background */
            color: #1b235e !important; /* Green text */
            border-radius: 0.5rem;
            width: 100%;
            font-size: 12px;
            margin-right: 10px !important;
            padding: 3px 15px;
      }
      .btn-share-con button {
            height: 1.9rem;
            display: flex; justify-content: center; align-content: center; padding: 0px !important; margin: 0px !important; flex-wrap: wrap;
            width: max-content      ;             
              /* Light green background */
      } 
      svg
      {
            color: #b3b3b3 !important; /* Green text */
      }
      .div-text a {
            margin-top: 0px !important;
      }

      .div-text a div
      {
            color: white !important; font-weight: bold;
      }
     table th, td
      {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;
            
      }
      table th 
      {
            font-size: 14px;
            font-weight: bold; color: #000000 !important;
      }
      table td 
      {
            font-size: 12px;
            font-weight: 500; color: #6b6b6b !important;
      }
   </style>

{% for credit in  all_credits %}   
<div  class=" pe-3 position-relative">



      <span id="forlou{{credit.id}}" style=" width: 1.5rem; height: 1.5rem; margin-top: rem; border-radius: 50%; background-color: #0f83ff; font-size: 12px;" class="d-flex d-none text-white position-absolute z-2 flex-wrap justify-content-center flex-wrap align-content-center">
            #{{ forloop.counter }} 
      </span>
{% if cuotas %}


      <div class="position-absolute  z-2 top-0 end-0   rounded-5  btn-edit      " style="margin-top: 40px; border: 1px solid rgba(220, 220, 220, 0); background-color: #eaeaea; margin-right: 6px !important;">
            {% if credit.estado_credito == False %} 

            <a class="" href="{% url "customer:update-credit" credit.id %}">
            <button class=" p-0 rounded-circle border-0  "   style="width: 30px; height: 30px;  background-color: #ffffff; "> 
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-brush-fill" viewBox="0 0 16 16" style="color: #979797;">
                        <path d="M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.1 6.1 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.1 8.1 0 0 1-3.078.132 4 4 0 0 1-.562-.135 1.4 1.4 0 0 1-.466-.247.7.7 0 0 1-.204-.288.62.62 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896q.19.012.348.048c.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04"/>
                      </svg>
            </button>                    
            </a>
            <button onclick="deleteCredit(this.id)" id="{{credit.id}}"
                   class=" border-0 mt-1 mb-1 bg-opacity-10 p-0 rounded-circle   " style="width: 30px; height: 30px;background-color: rgb(255, 255, 255) !important;"> 
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-lg" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8"/>
                  </svg> 
                  </svg>
            </button> <br> 

            {% endif %}


            <button onclick="GenerarFactura()" id="{{credit.id}}" class="    border-0  text-whiteÃŸ p-0 rounded-circle   " style="width: 30px; height: 30px; 
            background-color: #ffffff;"> 
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-receipt" style="color: #545454 !important;" viewBox="0 0 16 16">
                  <path d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27m.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0z"/>
                  <path d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5"/>
                </svg>
      </button>

      </div>
{% endif %}


      <div id="cuotas_credit{{credit.id}}" class='  credit-sp w-100 p-2 pb-0 pt-1  card   text-black-50 ' 
      style="  min-width: 490px;  max-width: 490px;
      font-size: 14px; 
      border-radius: 1.5rem; 
      height: 12rem ;
      box-shadow: #e5e5e500 1px 2px 1px 1px;  border: 1px solid rgb(221, 221, 221);">


<a class=" " href="{% url "customer:crear-credito" credit.id %}">
      <strong class="mt-1">Cliente</strong>
      <div class="d-flex ">
            {% comment %} {% if credit.customer.img1 %}
                  <img src="{{credit.customer.img1.url}}" class="  img-icons object-fit-cover" style="width: 47px; height: 47px; border-radius: 50%; 
                  filter: blur(90px);
                  filter: brightness(80%); "  alt=""> 
            {% endif %} {% endcomment %}
           <span class=" ms-2" style="margin-top: 13px; font-size: 12px; font-weight: bold;"> 
                  {{credit.name}} 
            </span>
      </div>
      
      </a>  


  

<section class="mt-2 mb-4 div-text rounded-4  me-3  ">
      <div class="w-100  rounded-4 p-2">
            <table class=" w-100 bg-transparent  ">
                  <thead>
                        <tr>
                              {% if cuotas %}
                                    <th scope="col">Fecha</th>
                          
                              {% endif %}
                              <th scope="col">Cuotas</th>
                              <th scope="col">Precio</th>
                              <th scope="col">Plazo</th>
                              <th scope="col">Capital</th>
                              <th scope="col">Estado</th>
                        </tr>
                  </thead>
                  <tbody>
                        <tr>
                              {% if cuotas %}
                                    <td>   {{credit.day_created|date:"m/d/Y" }}</td>
                                    {% endif %}

                              <td>        {{credit.price_feed}}</td>
                              <td> ${{credit.amount_feed|intcomma}}.00 </td>
                              <td> {% if credit.mode_pay == True %}
                                    (15) - (30)  (Q)
                                    {% else %}(M)
                                    {{credit.day_pay}}
                                    {% endif %}  </td>
                              <td>
                                    ${{credit.amount|intcomma}}.00     
                              </td>
                              <td>
                                    <div class="d-flex text-black-50 w-100 justify-content-start start-0  top-0" style="font-weight: 500; font-size: 12px;">
  
      
                                          {% if credit.estado_credito == True %}        
                                          <span  class='green-span d-flex me-2  justify-content-center align-content-center flex-wrap' >
                                                Finalizado
                                          </span>
                                          {% else %}
                                          <!-- <span  >
                                                Activo <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill " style="color: #73ff00 !important;" viewBox="0 0 16 16">
                                                   <circle cx="8" cy="8" r="8"/>
                                                 </svg>
                                          </span> -->
                                          {% if credit.credito_atrasado == False %} 
                                          <span  class='green-span d-flex me-2  justify-content-center align-content-center flex-wrap'  style="background-color: #eaeaea !important; color: #000000 !important;  ">
                                                Puntual
                                          </span>
                                       {% else %}
                                       <span  class='danger-span d-flex me-2  justify-content-center align-content-center flex-wrap' >
                                          Atrasado
                                    </span>
                                       {% endif %}
                                       
                                       {% endif %}
                                    </div>
                                    

                              </td>
                        </tr>
                  </tbody>
            </table>
      </div>      

</section>




  <style>
        .btn-share-con button
        {
              max-height: 3rem;
              border-radius: 2rem !important;
              text-align: center !important;
              background-color:  white !important;
              color: rgb(75, 75, 75) !important;
              font-size: 12px !important;
              border: rgba(227, 227, 227, 0.905) 0px solid !important;
              width: 100%;
        }
  </style>
  
        <div class='d-flex  btn-share-con w-100  justify-content-around mt-2  mb-2'>

              <a  class='w-100 m-0' 
                    href="https://api.whatsapp.com/send?phone=+18092998306&text=Cliente: *({{credit.customer.name}} {{credit.customer.last_name}})*, 
                     Firmado el *{{fecha_actual}}* ,
                     No. Cuenta; *{{credit.no_account}}*,
                     ; Detalles -> https://grupofycas.online/detail-credit/customer/{{credit.id}}" >
                    <button class="" style="" style="background-color: #ececec6c !important;">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share-fill  me-1"
                          style="margin-top: 2px;" viewBox="0 0 16 16">
                                <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5"/>
                              </svg>   Compartir
                    </button>
              </a>
        

              <a  target="_blank" class='m-0 me-1 ms-1 w-100' 
                    href="{% url "customer:card-customer" credit.customer.id credit.id %}">
                    <button style="background-color: #ffffff6c !important;">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" style="margin-top: 1px;" class="bi me-1 bi-stickies-fill" viewBox="0 0 16 16">
                                <path d="M0 1.5V13a1 1 0 0 0 1 1V1.5a.5.5 0 0 1 .5-.5H14a1 1 0 0 0-1-1H1.5A1.5 1.5 0 0 0 0 1.5"/>
                                <path d="M3.5 2A1.5 1.5 0 0 0 2 3.5v11A1.5 1.5 0 0 0 3.5 16h6.086a1.5 1.5 0 0 0 1.06-.44l4.915-4.914A1.5 1.5 0 0 0 16 9.586V3.5A1.5 1.5 0 0 0 14.5 2zm6 8.5a1 1 0 0 1 1-1h4.396a.25.25 0 0 1 .177.427l-5.146 5.146a.25.25 0 0 1-.427-.177z"/>
                              </svg>
                          Contrato
                    </button>
              </a>
              <a target="_blank"  class='m-0 w-100' 
                    href="{% url "customer:notary-customer" credit.customer.id  credit.id %}">
                    <button style="background-color: #ffffff6c !important;">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" 
                                style="margin: 1px;"
                          class="bi me-1 bi-file-text-fill" viewBox="0 0 16 16">
                                <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1m-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5M5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1m0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1"/>
                              </svg>
                          Notarial
                    </button>
              </a>
        </div>
  </div>
</div>

<script>

function toggleDisplayClass() {
      let elements = document.querySelectorAll('.btn-edit');
      elements.forEach(element => {
            if (element.classList.contains('d-none')) {
                  element.classList.remove('d-none');
                  element.classList.add('d-block');
            } else if (element.classList.contains('d-block')) {
                  element.classList.remove('d-block');
                  element.classList.add('d-none');
            }
      });
}

function deleteCredit(creditId) {

            $.ajax({
                  url: '/delete-credit',
                  data: {
                        id: creditId,
                  },
                  success: function(response) {
                        var credit_1 = document.getElementById('cuotas_credit' + creditId);
                        credit_1.classList.add('flip-up');
                        setTimeout(() => {
                              credit_1.classList.add('d-none');
                        }, 1000);   }  

                  
      
            });
}


</script>
{% endfor %}
