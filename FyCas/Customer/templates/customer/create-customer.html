{% include "base/base.html" %}
{% block content %}
{% load static %}
<style>
      #id_name_r1, #id_name_r2 {
            margin: 0 !important;
      }
</style>
      <div class="p-4 d-flex  flex-wrap mt-5 mb-5">
            <div class="d-flex justify-content-end w-100">
                  <div class="d-flex  flex-wrap w-100 justify-content-end">
                        <strong style="  font-family: Quicksand, sans-serif;
                        color: var(--color-one);
                        font-optical-sizing: auto;">                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-diamond-half m-0 p-0" viewBox="0 0 16 16">
                         <path d="M9.05.435c-.58-.58-1.52-.58-2.1 0L.436 6.95c-.58.58-.58 1.519 0 2.098l6.516 6.516c.58.58 1.519.58 2.098 0l6.516-6.516c.58-.58.58-1.519 0-2.098zM8 .989c.127 0 .253.049.35.145l6.516 6.516a.495.495 0 0 1 0 .7L8.35 14.866a.5.5 0 0 1-.35.145z"/>
                         </svg>
                        GRUPO FYCAS</strong>
                  </div>
            </div>
            <div class="w-100 d-flex flex-wrap align-content-center  flex-wrap">
                  <h3 class="p-0 m-0">
                        Para continuar, debes completar todos los campos.
                  </h3>
                  <p class="text-black-50 w-100">
                        Asegúrate de que toda la información que proporciones sea precisa y actual.
                  </p>
            </div>
      </div>

<section class="section p-2 m-2 mt-4  ms-1 me-1 " >
      <form action="" method="post" enctype='multipart/form-data'>
                  {% csrf_token %}
            <div class="m-1">
                <h6 class=" d-flex">
                  -Datos Personales
                </h6>  
            </div>
            <div class="d-flex flex-wrap ">
                  <p class="text-black-50 w-100 m-0 ms-2">
                        ~Revisar minuciosamente antes de enviar el formulario, reduce la posibilidad de errores
                  </p>
                  <div class="form-floating mb-3">
                        {{form.name}}
                        <label for="id_email">Nombre </label>
                  </div>
                  <div class="form-floating mb-3">
                        {{form.last_name}}
                        <label for="id_last_name">Apellidos </label>
                  </div>
                  <div class="form-floating mb-3">
                        {{form.dni}}
                        <label for="id_dni">Cedula</label>
                  </div>
                  <div class="form-floating mb-3">
                        {{form.number}}
                        <label for="id_number">Numero</label>
                  </div>

                  <div class="form-floating mb-3 ">
                        {{form.address}}
                        <label for="id_address">Direccion de recidencia</label>
                  </div>
                  <div class="w-100 mt-4 ">
                        <h6>
                              Fotos de Cedula (Delantera y Tracera)
                        </h6>
                        <p class="text-black-50 m-0 ms-2">
                              ~Procura una superficie plana, una buena iluminacion y calidad de la imagen
                        </p>
                  </div>
                  <div class="w-100 d-flex flex-wrap ">
                        <div class="div-label d-flex text-center flex-wrap justify-content-center position-relative aling-content-center "> 
                              {{form.img1}}
                              <img src=""   id="img-views1" style="display: none;" class="w-100  img h-100 object-fit-cover position-absolute top-0">
                              <label style="z-index: 1;" for="id_img1"  class="img-label position-absolute w-100 h-100 d-flex top-0 bg-opacity-10 bg-white justify-content-center align-content-center flex-wrap">
                                    <span class="bg-white  blur text-black d-flex align-content-center flex-wrap justify-content-center rounded-circle bg-opacity-50" style="width: 40px; height: 40px;">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-patch-plus" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5"/>
                                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"/>
                                              </svg>
                                    </span>
                              </label>
                        </div>
                        <div class="div-label text-center position-relative  d-flex flex-wrap justify-content-center aling-content-center"> 
                              {{form.img2}}
                              <label style="z-index: 1;" for="id_img2"  class="img-label position-absolute w-100 h-100 d-flex top-0 bg-opacity-25 bg-white justify-content-center align-content-center flex-wrap">
                                    <span class="bg-white  blur text-black d-flex align-content-center flex-wrap justify-content-center rounded-circle bg-opacity-50" style="width: 40px; height: 40px;">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-patch-plus" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M8 5.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 .5-.5"/>
                                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911z"/>
                                              </svg>
                                    </span>
                              </label>
                              <img src=""  id="img-views2" style="display: none;" class="w-100 img object-fit-cover h-100 position-absolute top-0">
                        </div>
                  </div>
                  <h6 class="p-0  mt-5">
                        Informacion Laboral
                  </h6>
                  <section class="w-100 d-flex flex-wrap  ">
                        <p class="text-black-50 m-0 ms-2">
                              ~Lugar de Trabajo, Cargo o (Funcion), Ingresos Mensuales y Numero de Contacto de la Empresa.
                        </p>
                        <div class="form-floating mb-3 w-100" >
                              {{form.work_information}}
                              <label for="id_work_information">Información Laboral
                              </label>
                        </div>
                  </section>
                  <h6 class="p-0  mt-5">
                        Referencias Personales
                  </h6>
                  <section class="w-100 d-flex flex-wrap  ">
                        <p class="text-black-50 m-0 ms-2">
                              ~Asegúrese de que sus referencias estén al tanto de que las proporcionará como referencia.
                        </p>
                        <div class="w-100">
                              <div class="w-100 d-flex flex-wrap">
                                    <div class="form-floating mb-3 d-flex flex-wrap " >
                                          {{form.name_r1}}
                                          <label for="id_work_information">Nombre de la primera referencia
                                          </label>
                                    </div>
                                    <div class="form-floating mb-3  " >
                                          {{form.number_r1}}
                                          <label for="id_work_information">Numero de la primera 
                                          </label>
                                    </div>
                              </div>
                              <p class="text-black-50 m-0 ms-2">
                                    ~Dos referentes pueden proporcionar una descripción más precisa y completa que uno solo.
                              </p>
                              {{form.lat}} {{form.lon}}
                              <div class="w-100 d-flex flex-wrap ">
                                    <div class="w-100 d-flex flex-wrap">
                                          <div class="form-floating m-0 mb-3  " >
                                                {{form.name_r2}}
                                                <label for="id_work_information">Nombre de la segunda referencia
                                                </label>
                                          </div>
                                          <div class="form-floating mb-3 " >
                                                {{form.number_r2}}
                                                <label for="id_number_r2">Numero de la segunda 
                                                </label>
                                          </div>
                                    </div>
                              </div>
                        </div>
                  </section>
                  <div class="container">
                  </div>
                  <div style='display: none;'  id='btn-add' class=" w-100  pt-4 justify-content-center">
                        <label style="cursor: pointer; " class=" d-flex flex-wrap flex-wrap align-content-center justify-content-center " onclick="Acept()"><span style=" font-family: Righteous, sans-serif;">Cancelar</span></label>
                        <button class='border-0 d-flex align-content-center justify-content-center text-primary bg-white border-1'>
                              <span id="acep-yes"   style='display: none; '>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-check-fill text-primary" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5m8.854-9.646a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"/>
                                    </svg>
                              </span> Si, Acepto 
                        </button>
                  </div>
                
                  <div class="w-100 d-flex justify-content-center mt-3 mb-4">
                        <div class="form-check" id="div-acept">
                              {% comment %} <input class="form-check-input" type="checkbox" value="" id="defaultCheck1"> {% endcomment %}
                              <label   
                              style='cursor: pointer;             
                              width: 17rem;
                              border-radius: 0.7rem;
                              padding:0.5rem 1rem;
                              font-weight: bold;
                              font-weight: 100;
                              margin: 0.1rem;
                              font-size: 14px;
                              color: var(--color-one);
                              font-family: "Righteous", sans-serif;
                              background-color: var(--bg-one);
                              border-color: var(--color-one);'   
                              onclick="CaptureLocation()" class='d-flex text-center justify-content-center'>
                                    <span id="acep">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-fill" viewBox="0 0 16 16">
                                          <path d="M2 2v13.5a.5.5 0 0 0 .74.439L8 13.069l5.26 2.87A.5.5 0 0 0 14 15.5V2a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2"/>
                                          </svg>
                                    </span>

                                    <span>
                                          Aceptar Terminos
                                    </span>
                              </label>
                            </div>
                  </div>
            </div>
      </form>
      </section>
      <script>

  // Obtener el input y la div de la imagen
  let input = document.getElementById("id_img1");
  let img = document.getElementById("img-views1");
  // Añadir un evento onchange al input para procesar la imagen seleccionada
  input.onchange = function(e) {
    // Obtener el archivo de la imagen
    var file = e.target.files[0];
    // Crear un objeto FileReader para leer el contenido del archivo
    var reader = new FileReader();
    reader.onload = function(e) {
      // Obtener el resultado de la lectura como una URL de datos
      var url = e.target.result;
      // Crear un elemento img para mostrar la imagen
      img.classList.add('img-view1');
      img.src = url;
      img.style.width = "50px";
      img.style.height = "50px";
      img.style.borderRadius = "1.5rem";
      img.style.display = "block"
      console.log(img.src)
    };
    reader.readAsDataURL(file);
  };

  // Obtener el input y la div de la imagen
  let input2 = document.getElementById("id_img2");
  let img2 = document.getElementById("img-views2");
  // Añadir un evento onchange al input2 para procesar la imagen seleccionada
  input2.onchange = function(e) {
    // Obtener el archivo de la imagen
    var file = e.target.files[0];
    // Crear un objeto FileReader para leer el contenido del archivo
    var reader = new FileReader();
    reader.onload = function(e) {
      // Obtener el resultado de la lectura como una URL de datos
      var url = e.target.result;
      // Crear un elemento img2 para mostrar la imagen
      img2.classList.add('img2-view2');
      img2.src = url;
      img2.style.width = "50px";
      img2.style.height = "50px";
      img2.style.borderRadius = "1.5rem";
      img2.style.display = "block"
      console.log(img2.src)
    };
    reader.readAsDataURL(file);
  };

//   Capture Code Geolcalitation

let CaptureLocation = ()=> {
      Acept()
      document.getElementById("div-acept").style.display = 'none';
      navigator.geolocation.getCurrentPosition((position) => {
            if(document.getElementById("id_lat").value){
            }
            else{
                  document.getElementById("id_lat").value = position.coords.latitude;
                  document.getElementById("id_lon").value = position.coords.longitude;
                  console.log(document.getElementById("id_lon").value)
                  console.log(document.getElementById("id_lat").value)
            }
      });
}

let Acept = () =>{
      
      let acept = document.getElementById("acep")
            if (acept.style.display === "none") {
                  document.getElementById("btn-add").style.display = 'none'
                  document.getElementById("acep-yes").style.display = 'none';
                  document.getElementById("div-acept").style.display = 'block';
                  acept.style.display = "block";
            } else {
                  document.getElementById("acep-yes").style.display = 'block';
                  document.getElementById("btn-add").style.display = 'flex'
                  acept.style.display = "none";
            }
            
}
var List = [""]
// Add DNI
function DNI(value) {
    // Elimina todos los caracteres no numéricos
    var number_dni = value.replace(/\D/g, '');
    // Agrega guiones después de los primeros 3 dígitos y los siguientes 7 dígitos
    var dni_ = number_dni.replace(/(\d{3})(\d{7})(\d{1})/, '$1-$2-$3');
    return dni_;
  }
  // Agrega un evento al campo de entrada
      document.getElementById('id_dni').addEventListener('input', function(e) {
    let dni = document.getElementById('id_dni')
    dni.value = dni.value.slice(0, 13);
    e.target.value = DNI(e.target.value);
  });

//   Add number
function NumbersFomat(value) {
    // Elimina todos los caracteres no numéricos
    var number = value.replace(/\D/g, '');
    // Agrega guiones después de los primeros 3 dígitos y los siguientes 7 dígitos
    var N = number.replace(/(\d{3})(\d{3})(\d{1})/, '$1-$2-$3');
    return N;
  }
  // Agrega un evento al campo de entrada
document.getElementById('id_number').addEventListener('input', function(e) {
            let n = document.getElementById('id_number')
            n.value = n.value.substring(0,12);
            e.target.value = NumbersFomat(e.target.value);
  });

document.getElementById('id_number_r1').addEventListener('input', function(e) {
            let n = document.getElementById('id_number_r1')
            n.value = n.value.slice(0, 12);
            e.target.value = NumbersFomat(e.target.value);
  });

document.getElementById('id_number_r2').addEventListener('input', function(e) {
            let n = document.getElementById('id_number_r2')
            n.value = n.value.slice(0, 12);
            e.target.value = NumbersFomat(e.target.value);
            
  });
</script>
{% endblock  %}