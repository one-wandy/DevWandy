

{% load static %}
{% load humanize %}
<style>
.text2 {
      font-size: 12px;
      color: #737373;
      font-weight: 500;
}
svg{
      color: #8e8e8e;
      width: 12px !important;
}
.rotar-btn {
    transform: rotate(90deg);
    display: inline-block;
    transition: transform 0.3s ease-in-out;
}
.blured {
      -webkit-backdrop-filter: blur(100px) !important;
      backdrop-filter: blur(100px) !important;
}
@media (max-width:700px) {
      .card-cu
      {
            width: 100% !important;
      }
}

.img-span:hover
{
      border-radius: 1.6rem !important;
}

@keyframes flip-up {
    0% {
        transform: rotateX(90deg);
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        opacity: 1;
    }
}

.flip-up {
    animation: flip-up 1s ease-out ;
    transform-origin: top; /* Punto de rotación */
    opacity: 1; /* Oculto por defecto */
}

@keyframes flid-sda {
    0% {
        transform: rotateX(-90deg);
        opacity: 0;
    }
    100% {
        transform: rotateX(0deg);
        opacity: 1;
    }
}
.flid-sda {
      animation: flid-sda 0.4s ease-out;
      transform-origin: left !important; /* Punto de rotación */
      opacity: 1; /* Oculto por defecto */
}
@media (min-width: 600px) {
      .clients {
            max-width: 340px;
            margin: 0.3rem;
      }
}
.btn-lik {
      background-color: #ffffff !important;
}
.opciones-span {
      font-size: 12px; color: rgb(139, 139, 139); background-color: #ffffff;
      padding: 0.4rem 1rem; border-radius: 1.3rem;  text-align: center; 
      border: 1px solid rgb(214, 214, 214); cursor: pointer;
      margin: 0.0rem 0.3rem;
}
.div-search {
      /* background-color: white; */
      transition: 0.4s ease-in !important;
}
.div-search:hover {
      min-width: 20rem;
      transition: width 0.5s ease;
}
@media (min-width: 700px) {
      .card-cu {
            width: 50% !important;
            max-width: 26rem;
            min-width: 26rem;
      }
      .div-cu {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
      }
}
.btn-sec-cl button
{
      border: none !important;
}


@keyframes rotate-stars {
      0% {
            transform: rotate(0deg);
            animation-timing-function: ease;

      }

      100% {
            transform: rotate(360deg);
            animation-timing-function: ease;

      }
}

.bi-stars {
      animation: rotate-stars 4s infinite;
}

</style>

<!-- <section class="d  -flex flex-wrap h-100 bg-danger  justify-content-center  overflow-scroll pb-5 p-1 pt-0 " > -->

      <!-- Nuevos clientes -->


{% if customer %}



<div class="w-100 d-flex">
      <div style="width: 100%;" class=" d-flex flex-wrap justify-content-evenly  pt-2 pb-3 align-content-start overflow-scroll vh-100 ">
            {% for c in customer %}
                  <div style="width: 408px; height: 181px;   " class="position-relative  mb-3 me-1 card-cu       d-flex justify-content-center ">

                        <div id="client{{c.id}}"     style=" transition: 0.5s ease-out !important;   
                        border-radius: 2rem;   z-index: 0 !important; background-color: #ffffff !important;
                                    box-shadow: 0px 1px 3px 1px rgba(218, 218, 218, 0.505);" class="w-100 position-relative  p-2 bg-white " >

                                    <!-- <button id="{{c.id}}"  onclick='OpenCloseBtn(this.id)' style="background-color: #35333e00; width: 35px; height: 35px; color: #000000 !important; top: 8rem; box-shadow: #eeeeee00 1px 1px 1px 1px; border: 0px solid #a7a7a7 !important; border-style: dotted !important;"   class="rounded-circle  position-absolute border-0  p-0 me-2 mb-2 mt-2 end-0 d-flex flex-wrap justify-content-center align-content-center ">
                                           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots >" style="margin-top: 10px;" viewBox="0 0 16 16">
                                                <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
                                          </svg> 
                                    </button> -->
                                    <div class="m-0 p-0" >
                                          <div class="d-flex">
                                          
                                                <span style="   border: 4px #d5d5d5  ; border-style:dotted; transition: 0.9s ease  !important; " 
                                                      class="p-1  img-span rounded-circle ">
                                                      {% if c.img1 %}
                                                      <img src="{{c.img1.url}}" class="  img-icons object-fit-cover" style="width: 47px; height: 47px; border-radius: 50%; 
                                                      filter: blur(90px);
                                                      filter: brightness(80%); "  alt=""> 
                                                      {% else %}
                                                      <img src="{% static "icons/doc(39).png" %}" class="  img-icons object-fit-cover" style="width: 47px; height: 47px; border-radius: 50%; 
                                                      filter: blur(90px);
                                                      filter: brightness(80%); "  alt=""> 
                                                      {% endif %}
                                                </span>
                                                <!-- <a href="{% url "customer:detail-customer" c.id %}" > -->
                                                      <div id="{{c.id}}" onclick='OpenCloseBtn(this.id)'  style="border-radius: 2rem;
                                                      width: 190px; height: 37px; border: 1px solid rgba(217, 217, 217, 0); font-weight: 600; color: #494949; line-height: 16px; background-color: transparent;" class="p-2  m-0 mt-3 ms-2   w-100  d-flex  ">
                                                            <div class="m-0  d-inline   text-first-letter-uppercase   p-1  " style="width: 281px; flex-wrap: nowrap !important; font-size: 16px; ">
                                                                  {{c.name}} {{c.last_name}}
                                                            </div>
                                                      </div>
                                                <!-- </a> -->
                                          </div>
                                    <div class="ms-1   overflow-visible" style="margin-top:2rem !important;">  
                                          <a href="">
                                          <span class="d-flex text2">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-vcard-fill m-0 mt-1 me-1 p-0 " viewBox="0 0 16 16">
                                                      <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm9 1.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1h-4a.5.5 0 0 0-.5.5M9 8a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1h-4A.5.5 0 0 0 9 8m1 2.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0-.5.5m-1 2C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1 1 0 0 0 2 13h6.96q.04-.245.04-.5M7 6a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/>
                                                </svg> {{c.dni}}
                                          </span></a>
                                          <a  href="https://api.whatsapp.com/send?phone=+1{{c.number}}&text=Estimado(a) {{c.name}} {{c.last_name}}"  class="m-0 p-0">
                                                <span class="d-flex text2">
                                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telephone-fill me-1 mt-1" viewBox="0 0 16 16">
                                                            <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"/>
                                                      </svg> {{c.number}}
                                                </span>
                        
                                          </a>


                                    
                                                <span class="d-flex text2 overflow-hidden  w-100 justify-content-end  pe-3" 
                                                style="font-size: 12px; color: #737373 !important; font-weight: 00 !important;">
                                                
                                                {% if c.customer_verify == False %} 
                                                <strong class='text-danger me-2'>
                                                       (No verificado)
                                                </strong>   
                                                {% endif %}  
                                                {{ c.day_created|date:"F/d/Y" }}
                                          </span>
                                    </div>
                                    </div>


                                    
                        </div>
                              {% include "customer/extends-customer.html" %} 

                  </div>
            {% endfor %}
      </div>
      <input type="text" id="sr-data" class="d-none">
      <div class=" position-relative  d-flex flex-wrap  align-content-start " 
      style="max-width: 18rem;">
            <input type="text" id='search-data'  style="font-size: 12px;  max-width: 20rem; 
            height: 2.8rem; outline: none !important; border-radius: 1.5rem!important;
            border: 1px solid rgb(223, 223, 223);"
            class="form-search border-1 text-center w-100 bg-white bottom-0  outline-none  m-0"  
            placeholder="Filtrar por nombre, dni, numero">

            <!-- Solicitudes -->

          <section class="card btn-sec-cl w-100 rounded-5 p-4 pt-1 mt-2 ">
            <h6 class="m-0 p-0 text-black-50 mt-2" style="font-size: 12px;">
                  <!-- Acciones  -->
            </h6>
            <div class="w-100 d-flex justify-content-start  ">

                  <a href="{% url "customer:agregar"  company.id %}" style="width: max-content; ">
                        <button class="border-1  mt-1 text-white rounded-circle position-relative  p-1  pe-2 ps-2" style="background-color: var(--bg-enfasis);
                        width: 2.5rem; height: 2.5rem;">
                              <img src="{% static "icons/mas.png" %}" width='24' style="filter: brightness(0) invert(1);">  

                              <span style="font-size: 12px;"></span>
                        </button>
                  </a>
                           
             <form action="" method="post"  style="max-width: max-content;">
                  {% csrf_token %}
                  <input type="text" class="d-none" name="noti" value="true">
                  <button class="border-1 text-white mt-1 rounded-circle position-relative  p-1  pe-2 ps-2" style="background-color: var(--bg-enfasis);
                        width: 2.5rem; height: 2.5rem;">  
                        {% if new_customer %}
                              <span style="font-size: 12px; width: 18px; height: 18px;" 
                              class=" rounded-circle position-absolute end-0 z-2 top-0 bg-black bg-opacity-75" >
                                    {{new_customer}} 
                              </span>
                        {% endif %}
                        <img src="{% static "icons/notify.png" %}" width='20' alt="" style="filter: brightness(0) invert(1);"><span style="font-size: 12px;"></span>
                  </button>
            </form>

         
<!-- 
            <button class="border-1 mt-1 text-white rounded-circle position-relative  p-1  pe-2 ps-2" style="background-color: var(--bg-enfasis);
            width: 2.5rem; height: 2.5rem;">  

      
                  <img src="{% static "icons/Note.png" %}" width='20' alt="" style="filter: brightness(0) invert(1);"><span style="font-size: 12px;"></span>
            </button> -->

            <!-- <button class="border-1 mt-1 text-white rounded-circle position-relative  p-1  pe-2 ps-2" style="background-color: var(--bg-enfasis);
            width: 2.5rem; height: 2.5rem;">  


            <img src="{% static "icons/Documento.png" %}" width='20' alt="" style="filter: brightness(0) invert(1);"><span style="font-size: 12px;"></span>
            </button>
            <button class="border-1 mt-1 text-white rounded-circle position-relative  p-1  pe-2 ps-2" style="background-color: var(--bg-enfasis);
            width: 2.5rem; height: 2.5rem;">  


            <img src="{% static "icons/file.png" %}" width='20' alt="" style="filter: brightness(0) invert(1);"><span style="font-size: 12px;"></span>
            </button> -->

      
            </div>


            <div class="w-100 mt-2"> 
                  <!-- <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://grupofycas.online/add-customer/{{company.id}}" class="w-100 rounded-5" alt="QR Code">
                  <a class="url text-center" href="https://grupofycas.online/add-customer/{{company.id}}"> -->

                  </a>
                  <style>
                        .url {
                              font-size: 12px;
                              color: var(--bg-enfasis);
                              font-weight: bold;
                        }
                        .url:hover {
                              text-decoration: underline;
                        }

                  </style>
            </div>


          </section>

            <a class="  ms-2  justify-content-center text-primary" href="{% url "customer:list-customer" %}" style="max-width: 4rem;">
                  <button class='d-flex align-content-center  bg-transparent  border-0'
                        style="color: var(--bg-enfasis) !important; font-weight: 700;" >
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-circle-fill  me-1" style="margin-top: 3px; color: var(--bg-enfasis) !important;" viewBox="0 0 16 16">
                  <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0m3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
                  </svg>
                  Atras
            </button> 
            </a>
    



            <!-- Listado de busqueda -->
            <div class=" card container-data d-none overflow-auto z-2   border-1 p-2 w-100   bg-white  bg-opacity-75  position-absolute top-0 mt-5" style="border-radius: 1.5rem;
             -webkit-backdrop-filter: blur(20px) !important;
             backdrop-filter: blur(20px) !important;
            max-height: 25rem; ">
                  <div id="list_data" class="d-none"></div>
                  <h6 id="no-found" class=" mt-2 d-none text-center text-black-50" 
                        style="font-size: 14px;">

                  </h6>    
            </div>

            {% if customer_ramdon %}
            <!-- Clientes mas frecuentes -->
            <section class="card p-3 rounded-5 mt-3 w-100 d-none">
                  <h6 class="m-0 p-0 text-black-50 mb-2 text-center" style="font-size: 12px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stars" viewBox="0 0 16 16">
                              <path d="M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828zM3.794 1.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387A1.73 1.73 0 0 0 4.593 5.69l-.387 1.162a.217.217 0 0 1-.412 0L3.407 5.69A1.73 1.73 0 0 0 2.31 4.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387A1.73 1.73 0 0 0 3.407 2.31zM10.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732L9.1 2.137a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"/>
                            </svg>       Clientes sugeridos
                  </h6>
                  <div class="  d-flex justify-content-around p-2 bg-transparent  flex-wrap " 
                  style="border: 0px solid grey;">
      
                        {% for i in customer_ramdon %}
      
                        <div class="position-relative">
                              <div class="rounded-circle bg-white m-1" style="width: 70px; height: 70px;">
                                    {% if i.img1 %}
                                          <img src="{{i.img1.url}}" class="w-100 h-100 object-fit-cover rounded-circle" alt="" onclick="GetDetail(this.id)" id="{{i.id}}
                                          ">   
                                          {% else %}
                                          <img src="{% static "icons/gallery.png" %}" class="w-100 h-100 object-fit-cover rounded-2" alt="" onclick="GetDetail(this.id)" id="{{i.id}}
                                          ">         

                                    {% endif %}
                              </div>
                        </div>
      
                        {% endfor %}
                  </div>
      
            </section>
            {% endif %}
      </div>
</div>

{% else %}
            <div class="warning vh-100 d-flex justify-content-center align-content-center flex-wrap w-100">
                  <h6 class="p-2 w-100 d-flex justify-content-center text-center pt-0 pb-0">
                        <form action="" method="post"  style="max-width: max-content;">
                              {% csrf_token %}
                              <input type="text" class="d-none" name="noti" value="true">
                              <button class="border-1 text-white mt-1 rounded-circle position-relative  p-1  pe-2 ps-2" style="background-color: var(--bg-enfasis);
                                    width: 2.5rem; height: 2.5rem;">  
                                    {% if new_customer %}
                                          <span style="font-size: 12px; width: 18px; height: 18px;" 
                                          class=" rounded-circle position-absolute end-0 z-2 top-0 bg-black bg-opacity-75" >
                                                {{new_customer}} 
                                          </span>
                                    {% endif %}
                                    <img src="{% static "icons/notify.png" %}" width='20' alt="" style="filter: brightness(0) invert(1);"><span style="font-size: 12px;"></span>
                              </button>
                        </form> <span class='mt-3 ms-2'>Ups!, no envontramos clientes</span>
                  </h6>
                  <p class="text-black-50  w-100 d-flex justify-content-center text-center" 
                        style="font-size: 12px; border-radius: 2rem; ">
                          <a class="  ms-2 justify-content-center  
                        " href="{% url "customer:list-customer" %}" 
                        style="max-width: 4rem; color: var(--bg-enfasis) !important;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-circle-fill  me-1" style="margin-top: 3px; color: var(--bg-enfasis) !important;" viewBox="0 0 16 16">
                              <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0m3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
                            </svg>
                            Atras
                        </a>
                  </p>
               
              
            </div>
{% endif %}


<!-- </section> -->
<script>
      function OpenCloseBtn(btn_id) {
            const div = document.getElementById('div-more' + btn_id);
            if (div.classList.contains('d-none')) {
                  div.classList.remove('d-none');
                  div.classList.add('d-block');
                  div.classList.add('flid-sda');

            }
            else if (div.classList.contains('d-block')) {
                  div.classList.add('flid-sda');
                  div.classList.remove('d-block');
                  div.classList.add('d-none');
            }
      }



      let GetDetail = (id) => {
            document.getElementById('input-send-data').value = id
            document.getElementById('btn-send-data').click()
      }


</script>