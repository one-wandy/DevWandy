{% extends "base/base.html" %}
{% block content %}
{% load static %}
{% load humanize %}
<style>
      .base-boyd {
            background-color: white !important;
      }
      .btn-mensajeria {
      background-color: var(--bg-enfasis) !important;
      color: white !important;
      width: max-content !important;
      
}
      .btn-mensajeria img {
      display: none;
}

.whatsapp-container {
      display: flex;
      height: 100%;
}

.sidebar {
      width: 24%;
      background-color: #f7f7f7;
      border-right: 1px solid #ddd;
      padding: 10px;
      height: max-content;
      border-radius: 1.5rem;
}

.profile {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
}

.profile img {
      border-radius: 50%;
      width: 50px;
      height: 50px;
      margin-right: 10px;
}

.search-bar input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      box-sizing: border-box;
}

.chats {
      margin-top: 20px;
}

.chat {
      display: flex;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
}

.chat:hover {
      outline-color: var(--bg-enfasis) ;
}

.chat img {
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin-right: 10px;
}

.chat-info h3 {
      margin: 0;
      font-size: 16px;
}

.chat-info p {
      margin: 0;
      color: #888;
}

.chat-window {
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background-color: #fff;
}

.chat-header {
      display: flex;
      align-items: center;
      padding: 5px;   
         border-bottom: 1px solid #ddd;
}

.chat-header img {
      border-radius: 50%;
      width: 30px;
      height: 30px;

}

.messages {
      flex-grow: 1;
      padding: 10px;
      overflow-y: auto;
}

.message {
      margin-bottom: 20px;
}

.message p {
      margin: 0;
      padding: 10px;
      border-radius: 5px;
}

.message.received p {
      background-color: #b3b3b349;
      align-self: flex-start;
}

.message.sent p {
      /* background-color: var(--bg-enfasis); */
      /* background-color: #2222227b; */
      color: rgb(255, 255, 255);
      align-self: flex-end;
      padding-top: 10px;
      padding-left: 20px;
}

.time {
      font-size: 10px;
      color: #a9a9a9;
      margin-top: 5px;
}

.message-input {
      display: flex;
      padding: 20px;
      border-top: 1px solid #ddd;
}

.message-input input {
      flex-grow: 1;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-right: 10px;
      box-sizing: border-box;
}

.chat, input:focus {
     outline-color: var(--bg-enfasis) !important;
}

.send-btn {
      background-color: transparent;
      /* background-color: var(--bg-enfasis); */
      color:  var(--bg-enfasis);
      border: none;
      cursor: pointer;
}

</style>
<section data-aos="fade-in" class=" rounded-5 h-100 overflow-scroll " style="transition: 0.5s;">



      <div  class="whatsapp-container  " >
            <div class="chat-window overflow-hidden rounded-5">
          
                  <div class="messages d-flex rounded-5 p-0" 
                        style="  background-image: url({{company.Icon.url}});
                        background-position: center; background-repeat: no-repeat;" >
                        <section class="w-100 d-flex  rounded-5 position-relative  bg-black bg-opacity-50 " 
                              style="
                                 -webkit-backdrop-filter: blur(400px) !important;
                                 backdrop-filter: blur(400px) !important;"  >
                                         <div class="chat-header position-absolute border-0 w-100 rounded-5 top-0" 
                                         style="
                                         border-bottom-left-radius: 0.4rem;
                                         border-bottom-right-radius: 0.4rem;">
                                         <span class="bg-white rounded-circle me-2 ms-1 mt-1 p-2">
                                               <img src="{{company.Icon.url}}" class="object-fit-cover" alt="Contact Picture">
                                         </span> <br>
                                         <span class="text-white mt-2" style="font-weight: bold;">
                                                {{user.first_name}} 
                                          </span>
                                   </div>

                                    <div style="width: 100%;" class="bg-black bg-opacity-50 rounded-0">
                                          <ul>
                                                <li>si</li>
                                          </ul>
                                    </div>

                                    <div style="width: 30rem;" class="d-flex flex-wrap h-100 align-content-end">
                                              
                              <div class='d-flex p-2'>
                                    <div class="message received">
                                        <span class="text-white " 
                                        style="font-weight: bold; font-size: 12px;">
                                        <img src="https://intn24.lalr.co/cms/2023/10/11164032/Texto-del-parrafo-99.jpg?w=1024" alt="Contact Picture" width="30" height="30" class="object-fit-cover rounded-circle me-1">  Lucia Fernandez</span>
                                          <p class="w-100 mt-1" style="border-radius: 1.5rem; border-top-left-radius: 0rem;
                                          color: #f7f7f7;"> Hola!, ¿cuales son los requisitos de prestamo de $70,000.00? </p>
                                          <span class="time">10:00 AM</span>
                                    </div>
                                 </div>
                                   <div class='d-flex w-100 justify-content-end '>
                                          <div class="message sent position-relative  p-2 ms-5 pb-4 "
                                                 style='width: 40rem;'>
                                                <p class="w-100  bg-black bg-opacity-25" style="border-radius: 1.5rem; border-bottom-right-radius: 8px;">¡Hola! Soy Soli, tu asistente financiero de {{company.name}}. <br> Para solicitar un préstamo de $70,000.00 necesitas: <br> <br> - <strong class="text-white">Ser mayor de edad </strong><br> - <strong class="text-white">Tener una cuenta bancaria</strong> <br> - <strong class="text-white">Comprobante de ingresos</strong> <br> - <strong class="text-white">Comprobante de domicilio</strong> <br> - <strong class="text-white">Identificación oficial vigente</strong>
                                                </p>
                                                <span class="time text-end me-2  mb-1 position-absolute bottom-0 end-0 ">10:01 AM</span>
                                          </div>
                                   </div>
                                   <div class='d-flex p-2'>
                                    <div class="message received">
                                        <span class="text-white " 
                                        style="font-weight: bold; font-size: 12px;">
                                        <img src="https://intn24.lalr.co/cms/2023/10/11164032/Texto-del-parrafo-99.jpg?w=1024" alt="Contact Picture" width="30" height="30" class="object-fit-cover rounded-circle me-1">  Lucia Fernandez</span>
                                          <p class="w-100 mt-1 typing-indicator" style="border-radius: 1.5rem; border-top-left-radius: 0rem;
                                          color: #f7f7f7;"> 
              

                                                <span></span>
                                                <span></span>
                                                <span></span>


                                          <style>
                                          .typing-indicator {
                                                display: flex;
                                                align-items: center;
                                                justify-content: center;
                                                height: 38px;
                                          }

                                          .typing-indicator span {
                                                display: block;
                                                width: 8px;
                                                height: 8px;
                                                margin: 0 2px;
                                                background-color: #ffffff;
                                                border-radius: 50%;
                                                animation: typing 1s infinite;
                                          }

                                          .typing-indicator span:nth-child(2) {
                                                animation-delay: 0.2s;
                                          }

                                          .typing-indicator span:nth-child(3) {
                                                animation-delay: 0.4s;
                                          }
                                 

                                          @keyframes typing {
                                                0%, 60%, 100% {
                                                      transform: translateY(0);
                                                }
                                                30% {
                                                      transform: translateY(-5px);
                                                }
                                          }

                                          
                                          </style>

                                    </p>
                                          <!-- <span class="time">10:40 AM</span> -->
                                    </div>
                                 </div>
                                   <div class="message-input w-100 border-0  d-flex justify-content-center position-sticky bottom-0">
                                         <input type="text" placeholder="Escribe mensaje" class=" input-ms bg-black bg-opacity-25 border-0 p-2 ps-4 pe-4 text-white-50" style="max-width: 20rem; outline: none; border-radius: 2rem; 
                                         min-height: 2.8rem;">
                                         <button class="send-btn d-none rounded-circle">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-send-fill m-0 p-0 " viewBox="0 0 16 16">
                                          <path d="M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471z"/>
                                        </svg>
                                    </button>
                              </div>
                                    </div>
                        </section>
                        <!-- Repeat message div for more messages -->
                       <section class="align-content-end d-none w-25 ">
                        <div class="sidebar card shadow w-100">
                              <div class="search-bar">
                                    <input type="text" placeholder="Buscar chat" class="rounded-5 bg-black bg-opacity-50">
                              </div>
                              <div class="chats overflow-scroll w-100 h-100">
            
                                    <div class="chat border-0">
                                          <img src="{% static 'images/contact.png' %}" alt="Contact Picture">
                                          <div class="chat-info">
                                                <h3>Contact Name {{ forloop.counter }}</h3>
                                                <p>Last message...</p>
                                          </div>
                                    </div>
                              
                                    <!-- Repeat chat div for more contacts -->
                              </div>
                        </div>
                       </section>
                  </div>
                 
                
            </div>
      </div>

</section>

<script>
      document.querySelector('.input-ms').addEventListener('input', function() {
            if (this.value.length > 2) {
                  document.querySelector('.send-btn').classList.remove('d-none');
            } else {
                  document.querySelector('.send-btn').classList.add('d-none');
            }
      });
</script>
{% endblock %}